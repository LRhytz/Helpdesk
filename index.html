<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Help Desk</title>
  <!-- Link to your external CSS file -->
  <link rel="stylesheet" type="text/css" href="index.css">
</head>
<body>

  <!-- Logo -->
  <img src="Images/Oracle.png" alt="My downloaded image" class="top-left">

  <!-- Help Section with Search Bar -->
  <div class="help-section">
    <h2>What can we help you with?</h2>
    <div class="search-container">
      <img src="Icons/search.png" alt="Search Icon" class="search-icon">
      <input type="text" id="search-bar" placeholder="Search..." onkeyup="searchFunction()">
    </div>
  </div>

  <!-- ====================== WORKING INSTRUCTIONS ====================== -->
  <div class="main-title" onclick="toggleSubTopics('subtopics-1', 'arrow-1')">
    <img src="Icons/information-pamphlet.png" class="icon">
    <span>Working Instructions <span id="arrow-1" class="dropdown-arrow">▼</span></span>
  </div>
  <div class="subtopics-container" id="subtopics-1">
    <ul>
      <!-- Receivables -->
      <li>
        <a href="#" onclick="toggleSubTopics('wi-receivables-subtopics', 'arrow-wi-receivables'); event.stopPropagation();">
          Receivables <span id="arrow-wi-receivables" class="dropdown-arrow">▼</span>
        </a>
        <ul class="nested-subtopics" id="wi-receivables-subtopics">
          <li><a href="pdfs/working_instructions/receivables/How to Approve AR Adjustments .pdf" target="_blank">How to Approve AR Adjustments</a></li>
          <li><a href="pdfs/working_instructions/receivables/How to Create AR Transation Type and Receipt Activity.pdf" target="_blank">How to Create AR Transaction Type and Receipt Activity</a></li>
          <li><a href="pdfs/working_instructions/receivables/How to Interface AR Invoices.pdf" target="_blank">How to Interface AR Invoices</a></li>
          <li><a href="pdfs/working_instructions/receivables/How to Interface AR Pay Modes.pdf" target="_blank">How to Interface AR Pay Modes</a></li>
          <li><a href="pdfs/working_instructions/receivables/How to Interface Customer.pdf" target="_blank">How to Interface Customer</a></li>
          <li><a href="pdfs/working_instructions/receivables/How to Interface MISC Receipt.pdf" target="_blank">How to Interface MISC Receipt</a></li>
          <li><a href="pdfs/working_instructions/receivables/How to Interface SCD Refund.pdf" target="_blank">How to Interface SCD Refund</a></li>
          <li><a href="pdfs/working_instructions/receivables/How to Interface Standard Receipt.pdf" target="_blank">How to Interface Standard Receipt</a></li>
        </ul>
      </li>

      <!-- Payables -->
      <li>
        <a href="#" onclick="toggleSubTopics('wi-payables-subtopics', 'arrow-wi-payables'); event.stopPropagation();">
          Payables <span id="arrow-wi-payables" class="dropdown-arrow">▼</span>
        </a>
        <ul class="nested-subtopics" id="wi-payables-subtopics">
          <li><a href="pdfs/working_instructions/payables/Delegating PR Approval.pdf" target="_blank">Delegating PR Approval</a></li>
          <li><a href="pdfs/working_instructions/payables/APPROVING AR ADJUSTMENTS.pdf" target="_blank">Approving AR Adjustments</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Setup a Supplier .pdf" target="_blank">How to setup a supplier</a></li>
          <li><a href="pdfs/working_instructions/payables/lodging-and-communication-allowance.pdf" target="_blank">Lodging and Communication Allowance</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Book a Debit Memo.pdf" target="_blank">How to Book a Debit Memo</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Book a Prepayment.pdf" target="_blank">How to Book a Prepayment</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Book a Standard Invoice .pdf" target="_blank">How to Book a Standard Invoice</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Book an Expense Report.pdf" target="_blank">How to Book an Expense Report</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Interface AP Invoice.pdf" target="_blank">How to Interface AP Invoice</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Interface Non-Supplier (Non-Trade).pdf" target="_blank">How to Interface Non-Supplier (Non-Trade)</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Interface Supplier (Trade).pdf" target="_blank">How to Interface Supplier (Trade)</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Prepare a Prepayment.pdf" target="_blank">How to Prepare a Prepayment</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Prepare a Refund.pdf" target="_blank">How to Prepare a Refund</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Prepare an Online Payment .pdf" target="_blank">How to Prepare an Online Payment</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Upload Check.pdf" target="_blank">How to Upload Check</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Upload Payment.pdf" target="_blank">How to Upload Payment</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Generate a Voucher.pdf">How to Generate a Voucher</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Validate an Invoice.pdf" target="_blank">How to Validate an Invoice</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Interface Lodging and  Communication Allowance.pdf">How to Interface Lodging and Communication Allowance</a></li>
          <li><a href="pdfs/working_instructions/payables/How to Upload Payment.pdf">How to Upload Payment</a></li>
        </ul>
      </li>

      <!-- General Ledger -->
      <li>
        <a href="#" onclick="toggleSubTopics('wi-gl-subtopics', 'arrow-wi-gl'); event.stopPropagation();">
          General Ledger <span id="arrow-wi-gl" class="dropdown-arrow">▼</span>
        </a>
        <ul class="nested-subtopics" id="wi-gl-subtopics">
          <li><a href="pdfs/working_instructions/general_ledger/How to Interface Sales.pdf" target="_blank">How to Interface Sales</a></li>
          <li><a href="pdfs/working_instructions/general_ledger/How to Interface Payroll.pdf" target="_blank">How to Interface Payroll</a></li>
          <li><a href="pdfs/working_instructions/general_ledger/NT_Workflow_User Manual.pdf" target="_blank">NT Workflow User Manual</a></li>
          <li><a href="pdfs/working_instructions/general_ledger/How to Open or Close a Period.pdf" target="_blank">How to Open or Close a period</a></li>
          <li><a href="pdfs/working_instructions/general_ledger/How to Create Accounting.pdf" target="_blank">How to Create Accounting</a></li>
          <li><a href="pdfs/working_instructions/general_ledger/How to Create Chart of Account.pdf" target="_blank">How to create Chart of Account</a></li>
        </ul>
      </li>

      <!-- Purchasing -->
      <li>
        <a href="#" onclick="toggleSubTopics('wi-purchasing-subtopics', 'arrow-wi-purchasing'); event.stopPropagation();">
          Purchasing <span id="arrow-wi-purchasing" class="dropdown-arrow">▼</span>
        </a>
        <ul class="nested-subtopics" id="wi-purchasing-subtopics">
          <li><a href="pdfs/working_instructions/purchasing/Creating Purchase Request.pdf" target="_blank">Creating Purchase Request</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Create New Store Location.pdf" target="_blank">How to Create New Store Location</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Approve Purchase Request V2.pdf" target="_blank">How to Approve Purchase Request V2</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Approve Purchase Request.pdf" target="_blank">How to Approve Purchase Request</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Auto Create Purchase Order V2.pdf" target="_blank">How to Auto Create Purchase Order V2</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Auto Create Purchase Order.pdf" target="_blank">How to Auto Create Purchase Order</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Close Purchase Request.pdf" target="_blank">How to Close Purchase Request</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Create Purchase Request V2.pdf" target="_blank">How to Create Purchase Request V2</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Create Purchase Request.pdf" target="_blank">How to Create Purchase Request</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Delegate PR Approval V2.pdf" target="_blank">How to Delegate PR Approval V2</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Generate Expenditure Request Form.pdf" target="_blank">How to Generate Expenditure Request Form</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Generate Purchase Request .pdf" target="_blank">How to Generate Purchase Request</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Receive Purchase Request in Oracle.pdf" target="_blank">How to Receive Purchase Request in Oracle</a></li>
          <li><a href="pdfs/working_instructions/purchasing/How to Return Received Purchase.pdf" target="_blank">How to Return Received Purchase</a></li>
          <li><a href="pdfs/working_instructions/purchasing/Receiving Purchase Request.pdf" target="_blank">Receiving Purchase Request</a></li>
        </ul>
      </li>

      <!-- Oracle Guides -->
      <li>
        <a href="#" onclick="toggleSubTopics('wi-oracle-guides-subtopics', 'arrow-wi-oracle-guides'); event.stopPropagation();">
          Oracle Guides <span id="arrow-wi-oracle-guides" class="dropdown-arrow">▼</span>
        </a>
        <ul class="nested-subtopics" id="wi-oracle-guides-subtopics">
          <li><a href="pdfs/working_instructions/oracle_guides/Mozilla Fix - PDF Automatically downloads when opened through the Helpdesk.pdf" target="_blank">Mozilla Fix - PDF Automatically downloads</a></li>
          <li><a href="pdfs/working_instructions/oracle_guides/Rose Pharmacy Helpdesk Source Code Modification Manual.pdf" target="_blank">Rose Pharmacy Helpdesk Source Code Modification Manual</a></li>
          <li><a href="pdfs/working_instructions/oracle_guides/ORACLE USER INTERFACE NAVIGATION.pdf" target="_blank">Oracle User Interface Navigation</a></li>
          <li><a href="pdfs/working_instructions/oracle_guides/Oracle Interface Guide.pdf" target="_blank">Oracle Interface Guide</a></li>
          <li><a href="pdfs/working_instructions/oracle_guides/Oracle Reports Glossary.pdf" target="_blank">Oracle Reports Glossary</a></li>
          <li><a href="pdfs/working_instructions/oracle_guides/Other Guides for FBA.pdf" target="_blank">Other Guides for FBA</a></li>
          <li><a href="pdfs/working_instructions/oracle_guides/oracle-bugs-and-fixes.pdf" target="_blank">Oracle Bugs and Fixes</a></li>
          <li><a href="pdfs/working_instructions/oracle_guides/how-to-create-new-store-location.pdf" target="_blank">How to Create New Store Location</a></li>
          <li><a href="pdfs/working_instructions/oracle_guides/How to Create Oracle User Account .pdf" target="_blank">How to Create Oracle User  Account</a></li>
          <li><a href="pdfs/working_instructions/oracle_guides/HOW TO LOG-IN TO ORACLE.pdf" target="_blank">How to Login to Oracle</a></li>
          <li><a href="pdfs/working_instructions/oracle_guides/How to Reset Oracle Password .pdf" target="_blank">How to Reset Oracle Password</a></li>
          <li><a href="pdfs/working_instructions/oracle_guides/User Interface Navigation.pdf" target="_blank">User Interface Navigation</a></li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- ====================== SOP ====================== -->
  <div class="main-title" onclick="toggleSubTopics('subtopics-2', 'arrow-2')">
    <img src="Icons/standard-operating-procedures.png" class="icon">
    <span>SOP<span id="arrow-2" class="dropdown-arrow">▼</span></span>
  </div>
  <div class="subtopics-container" id="subtopics-2">
    <ul>
      <!-- Finance -->
      <li>
        <a href="#" onclick="toggleSubTopics('sop-finance-subtopics', 'arrow-sop-finance'); event.stopPropagation();">
          Finance <span id="arrow-sop-finance" class="dropdown-arrow">▼</span>
        </a>
        <ul class="nested-subtopics" id="sop-finance-subtopics">
          <li><a href="pdfs/How to Generate BIR Form 2307.pdf" target="_blank">How to Generate BIR Form 2307</a></li>
          <li><a href="pdfs/How to Generate Daily Collection Report.pdf" target="_blank">How to Generate Daily Collection Report</a></li>
          <li><a href="pdfs/How to Interface Buying Income.pdf" target="_blank">How to Interface Buying Income</a></li>
          <li><a href="pdfs/How to Interface RTV.pdf" target="_blank">How to Interface RTV</a></li>
          <li><a href="pdfs/How to Setup Bank Account.pdf" target="_blank">How to Setup Bank Account</a></li>
        </ul>
      </li>
      <!-- Treasury -->
      <li>
        <a href="#" onclick="toggleSubTopics('sop-treasury-subtopics', 'arrow-sop-treasury'); event.stopPropagation();">
          Treasury <span id="arrow-sop-treasury" class="dropdown-arrow">▼</span>
        </a>
        <ul class="nested-subtopics" id="sop-treasury-subtopics">
          <li><a href="pdfs/How to Setup Customer.pdf" target="_blank">How to Setup Customer</a></li>
          <li><a href="pdfs/How to Setup Item Code.pdf" target="_blank">How to Setup Item Code</a></li>
          <li><a href="pdfs/How to Setup Quotation.pdf" target="_blank">How to Setup Quotation</a></li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- ====================== FUNCTIONAL SPECIFICATIONS ====================== -->
  <div class="main-title" onclick="toggleSubTopics('subtopics-4', 'arrow-4')">
    <img src="Icons/design-resources.png" class="icon">
    <span>Functional Specifications<span id="arrow-4" class="dropdown-arrow">▼</span></span>
  </div>
  <div class="subtopics-container" id="subtopics-4">
    <ul>
      <!-- Receivables -->
      <li>
        <a href="#" onclick="toggleSubTopics('fs-receivables-subtopics', 'arrow-fs-receivables'); event.stopPropagation();">
          Receivables <span id="arrow-fs-receivables" class="dropdown-arrow">▼</span>
        </a>
        <ul class="nested-subtopics" id="fs-receivables-subtopics">
          <li><a href="pdfs/AP Invoice Listing.pdf" target="_blank">AP Invoice Listing</a></li>
          <li><a href="pdfs/AP Vendor Interface Enhancement.pdf" target="_blank">AP Vendor Interface Enhancement</a></li>
          <li><a href="pdfs/Auto-Email_PA_2307_NP.pdf" target="_blank">Auto Email PA 2307 NP</a></li>
          <li><a href="pdfs/Service Invoice.pdf" target="_blank">Service Invoice</a></li>
          <li><a href="pdfs/HSBC Pesonet Enhancement.pdf" target="_blank">HSBC PESONET Enhancement</a></li>
          <li><a href="pdfs/Metrobank Online Solution Bank File.pdf" target="_blank">Metrobank Online Solution Bank File</a></li>
          <li><a href="pdfs/Budget Monitoring Workflow.pdf" target="_blank">Budget Monitoring Workflow</a></li>
        </ul>
      </li>
      <!-- Payables -->
      <li>
        <a href="#" onclick="toggleSubTopics('fs-payables-subtopics', 'arrow-fs-payables'); event.stopPropagation();">
          Payables <span id="arrow-fs-payables" class="dropdown-arrow">▼</span>
        </a>
        <ul class="nested-subtopics" id="fs-payables-subtopics">
          <li><a href="pdfs/AP Invoice Listing.pdf" target="_blank">AP Invoice Listing</a></li>
          <li><a href="pdfs/MD050 Disbursement Summary Report.pdf" target="_blank">Disbursement Summary Report</a></li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- ====================== PROCESS FLOW ====================== -->
  <div class="main-title" onclick="toggleSubTopics('subtopics-3', 'arrow-3')">
    <img src="Icons/workflow.png" class="icon">
    <span>Process Flow <span id="arrow-3" class="dropdown-arrow">▼</span></span>
  </div>
  <div class="subtopics-container" id="subtopics-3">
    <ul>
      <li><a href="file7.html">Process Step 1</a></li>
      <li><a href="file8.html">Process Step 2</a></li>
    </ul>
  </div>

  <!-- ====================== ADD FILE SECTION ====================== -->
  <!-- Moved here (below all main topics) -->
  <div id="addFileContainer">
    <!-- Button design with onclick to toggle the add file form -->
    <button type="button" class="button" onclick="toggleAddFileForm()">
      <span class="button__text">Add File</span>
      <span class="button__icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" 
             stroke-width="2" stroke-linejoin="round" stroke-linecap="round" 
             stroke="currentColor" height="24" fill="none" class="svg">
          <line y2="19" y1="5" x2="12" x1="12"></line>
          <line y2="12" y1="12" x2="19" x1="5"></line>
        </svg>
      </span>
    </button>

    <!-- Hidden file upload form -->
    <div id="addFileForm">
      <input type="file" id="newFileInput">
      <input type="text" id="fileTitle" placeholder="File Title">
      <select id="fileCategory">
        <optgroup label="Working Instructions">
          <option value="wi-receivables-subtopics">Receivables</option>
          <option value="wi-payables-subtopics">Payables</option>
          <option value="wi-gl-subtopics">General Ledger</option>
          <option value="wi-purchasing-subtopics">Purchasing</option>
          <option value="wi-oracle-guides-subtopics">Oracle Guides</option>
        </optgroup>
        <optgroup label="SOP">
          <option value="sop-finance-subtopics">Finance</option>
          <option value="sop-treasury-subtopics">Treasury</option>
        </optgroup>
        <optgroup label="Functional Specifications">
          <option value="fs-receivables-subtopics">Receivables</option>
          <option value="fs-payables-subtopics">Payables</option>
        </optgroup>
      </select>
      <button class="upload-btn" onclick="uploadFile()">Upload</button>
    </div>
  </div>

  <!-- ========== JavaScript Section ========== -->
  <script>
    /* -------------------- Polyfills -------------------- */
    if (window.NodeList && !NodeList.prototype.forEach) {
      NodeList.prototype.forEach = Array.prototype.forEach;
    }
    if (!String.prototype.includes) {
      String.prototype.includes = function(search, start) {
        if (typeof start !== 'number') { start = 0; }
        if (start + search.length > this.length) { return false; }
        return this.indexOf(search, start) !== -1;
      };
    }
    if (!String.prototype.endsWith) {
      String.prototype.endsWith = function(searchStr, position) {
        var subjectString = this.toString();
        if (position === undefined || position > subjectString.length) {
          position = subjectString.length;
        }
        position -= searchStr.length;
        var lastIndex = subjectString.indexOf(searchStr, position);
        return lastIndex !== -1 && lastIndex === position;
      };
    }
    if (!Element.prototype.closest) {
      Element.prototype.closest = function(s) {
        var el = this;
        do {
          if (el.matches && el.matches(s)) return el;
          el = el.parentElement || el.parentNode;
        } while (el !== null && el.nodeType === 1);
        return null;
      };
    }

    /* -------------------- Search Function -------------------- */
    function expandAllParents(topic) {
      var container = topic.closest(".subtopics-container");
      while (container) {
        container.classList.add("show");
        var arrow = container.previousElementSibling 
          ? container.previousElementSibling.querySelector(".dropdown-arrow") 
          : null;
        if (arrow) {
          arrow.textContent = "▲";
        }
        container = container.parentElement
          ? container.parentElement.closest(".subtopics-container")
          : null;
      }
    }

    window.searchFunction = function() {
      var input = document.getElementById("search-bar").value.toLowerCase();
      var allTopics = document.querySelectorAll(".main-title, .subtopics-container ul li");

      allTopics.forEach(function(topic) {
        var text = (topic.textContent || topic.innerText).toLowerCase();
        if (text.includes(input) && input !== "") {
          topic.style.display = "block";
          expandAllParents(topic);
        } else if (input === "") {
          topic.style.display = "block";
        } else {
          topic.style.display = "none";
        }
      });

      if (input === "") {
        var allContainers = document.querySelectorAll(".subtopics-container");
        allContainers.forEach(function(container) {
          container.classList.remove("show");
          var title = container.previousElementSibling;
          if (title) { title.classList.remove("icon-left"); }
          var arrow = title ? title.querySelector(".dropdown-arrow") : null;
          if (arrow) { arrow.textContent = "▼"; }
        });
        return;
      }

      var mainTitles = document.querySelectorAll(".main-title");
      mainTitles.forEach(function(title) {
        var subtopicsContainer = title.nextElementSibling;
        if (!subtopicsContainer) return;
        var visibleSubtopics = subtopicsContainer.querySelectorAll("li[style*='display: block']");
        if (visibleSubtopics.length === 0) {
          title.style.display = "none";
          subtopicsContainer.classList.remove("show");
        } else {
          title.style.display = "block";
        }
      });
    };

    /* -------------------- Add PDF Icons -------------------- */
    document.addEventListener("DOMContentLoaded", function() {
      var links = document.querySelectorAll(".subtopics-container ul li a");
      links.forEach(function(link) {
        if (!link.dataset.iconAdded) {
          if (link.href.endsWith(".pdf")) {
            link.innerHTML = "📄 " + link.innerHTML;
          } else {
            link.innerHTML = "🔗 " + link.innerHTML;
          }
          link.dataset.iconAdded = "true";
        }
      });
    });

    /* -------------------- Toggle Subtopics -------------------- */
    window.toggleSubTopics = function(contentId, arrowId, event) {
      if (event) { event.preventDefault(); }
      var subtopics = document.getElementById(contentId);
      var arrow = document.getElementById(arrowId);
      subtopics.classList.toggle("show");
      if (arrow) {
        arrow.textContent = subtopics.classList.contains("show") ? "▲" : "▼";
      }
    };

    /* -------------------- Toggle Add File Form -------------------- */
    function toggleAddFileForm() {
      var form = document.getElementById('addFileForm');
      form.style.display = form.style.display === 'none' ? 'block' : 'none';
    }

    /* -------------------- Simulate "Upload" and Add Link -------------------- */
    function uploadFile() {
      var fileInput = document.getElementById('newFileInput');
      var fileTitleInput = document.getElementById('fileTitle');
      var fileCategorySelect = document.getElementById('fileCategory');

      var file = fileInput.files[0];
      var fileTitle = fileTitleInput.value || (file ? file.name : 'New File');
      var categoryId = fileCategorySelect.value;

      if (file) {
        var categoryContainer = document.getElementById(categoryId);
        if (categoryContainer) {
          var ul = categoryContainer.querySelector('ul');
          if (!ul) {
            ul = document.createElement('ul');
            categoryContainer.appendChild(ul);
          }
          var newListItem = document.createElement('li');
          var newLink = document.createElement('a');
          newLink.textContent = fileTitle;
          newLink.href = '#'; // Replace with the actual file URL after upload.
          newListItem.appendChild(newLink);
          ul.appendChild(newListItem);

          alert('File added successfully!');
        } else {
          alert('Selected category not found.');
        }
      } else {
        alert('Please select a file.');
      }

      fileInput.value = "";
      fileTitleInput.value = "";
    }
  </script>
</body>
</html>
